$(document).ready(function(){var n=false;var c=false;var k=true;var A;var D=false;var E=40;var d=0;var C=$("#news").children("li").size();$("#footer-nav a, #coming-soon a").fadeTo("slow",0.6);$(".whoscomingbutton, #panel").css("opacity",0.93);$(".left, .right").tipTip({maxWidth:"auto",fadeIn:200,fadeOut:150,delay:0});$("#events-navigation > li").children("a").tipTip({defaultPosition:"left",edgeOffset:10,maxWidth:"auto",fadeIn:200,fadeOut:150,delay:500});function w(){first=$("#news li:first").text();$.jGrowl(first,{life:2000,glue:"before",cloaser:false,speed:500,close:function(M,L,N){d++;if(d==C){K()}}});$("#news li:first").remove();g(first)}function g(L){last="<li style='display:none;'>"+L+"</li>";$("#news").append(last)}function K(){k=true;clearInterval(A)}if(!k){A=setInterval(w,8000)}$("#footer-nav a").hover(function(){$(this).stop(true,true).fadeTo("slow",1)},function(){$(this).stop(true,true).fadeTo("slow",0.4)});$("#open").click(function(){$("#panel").animate({height:320},1500,"easeOutElastic");$("#panel .content").show();$("#toppanel").css("z-index","250")});$("#close").click(function(){$("#panel").animate({height:15},1000,"easeOutBounce");$("#toppanel").css("z-index","151").fadeTo("fast",1)});$("#toggle a").click(function(){$("#toggle a").toggle()});$("#main-wrapper").click(function(){$(this).children("img").animate({bottom:800},{duration:300},"easeOutCubic").fadeOut("fast");$("#links-wrapper").stop(false,true).show();p()});var i="flash/sparks.swf";$(".sparks").flash({src:i,width:200,height:120,wmode:"transparent",quality:"medium"},{update:false});var f={sensitivity:2,interval:100,over:m,timeout:100,out:e};function m(){left=Math.round($(this).offset().left-$(this).parent().parent().offset().left);if(!n){$(this).parent().siblings().stop(false,true).fadeTo(800,0.05);$(this).stop(false,true).animate({paddingTop:"10"},400,function(){$(".sparks").css({left:left,visibility:"visible"})});$(this).siblings(".tip").stop(false,true).animate({bottom:80,opacity:1},400);$(this).siblings(".tip-reflection").stop(false,true).animate({opacity:1},400);$(this).bind("click",{id:$(this).parent("div").attr("id")},function(L){B(L.data.id)})}}function e(){if(!n){$(".sparks").css("visibility","hidden");$(this).parent().siblings().stop(false,true).fadeTo(400,1);$(this).stop(false,true).animate({paddingTop:"0"},400);$(this).siblings(".tip").stop(false,true).animate({bottom:65,opacity:0},400);$(this).siblings(".tip-reflection").stop(false,true).animate({opacity:0},400);$(this).unbind("click")}}$(".links").children("img").hoverIntent(f);$("#workshop-categories .back-home, #event-categories .back-home, #special-categories .back-home, #pick-cat .back-home").click(function(){$("#links-wrapper").animate({width:"930px"},400);p();$("#pick-cat, #event-categories, #coming-soon, #workshop-categories, #workshops-top-navigation, .category-text, #special-categories").fadeOut(400);$(".category-event-list, #workshops-list, #specials-list").find("a").removeClass("selected")});$("#coming-soon .back-home").click(function(){$("#coming-soon").fadeOut(400,function(){$("body").animate({backgroundColor:"white"},800,function(){$("#links-wrapper").animate({width:"930px"},10,function(){p()})})})});$("#coming-soon a").hover(function(){$("#coming-soon a").fadeTo("slow",1)},function(){$("#coming-soon a").fadeTo("slow",0.6)});function B(M){n=true;K();if(c==false){c=true;var L="#"+M;$(".sparks").stop(true,true).css("visibility","hidden");$(".links").not(L).stop(false,true).animate({width:"0",opacity:"0"},600,"easeOutCubic",function(){$(L).children("img").animate({paddingTop:"0"},500)});$("#links-wrapper").animate({width:270},1000,function(){if(L=="#events-link"){navID="#events-navigation"}else{if(L=="#specials-link"){navID=""}else{if(L=="#nites-link"){navID=""}else{if(L=="#workshops-link"){navID=""}}}}if(navID){o(navID)}if(M=="events-link"){$("#pick-cat").fadeIn(500)}else{if(M=="workshops-link"){$("#workshop-categories, #workshops-list, #workshops-main").fadeIn(500)}else{if(M=="specials-link"){$("#special-categories, #specials-list, #specials-main").fadeIn(500)}else{if(M=="nites-link"){G(L)}}}}})}}function p(){c=false;n=false;$(".tip").show().fadeTo(10,0);$(".sparks").css("visibility","hidden");$("#events-navigation").children("li").children("a").css("marginLeft","60px");$("#events-navigation").hide();$(".tip-reflection").show().fadeTo(10,0);$(".links").stop(true,true).animate({width:"225px"},600,"easeOutCubic");$(".links").animate({opacity:"1"},1000,"easeOutCubic")}function G(L){$("body").animate({backgroundColor:"black"},600,function(){$("#coming-soon").fadeIn(800)});left=Math.round($(L).offset().left-$(L).parent().parent().offset().left);$(".sparks").css({left:left,visibility:"visible"});setTimeout("$('.sparks').css('visibility', 'hidden')",8000)}function o(N){$(N).show();if($(N)){var M="56px";var O="0px";var L=400;$(N+" > li").each(function(P){$(this).hover(function(){$("a",this).stop().animate({marginLeft:O},200)},function(){$("a",this).stop().animate({marginLeft:M},200)})})}$(N+" > li").each(function(P){$("a",this).fadeTo(L,0.8).animate({marginLeft:O},200).animate({marginLeft:M},200);L+=100})}$("#events-navigation, #cat-list h2").find("a").click(function(){var M="#"+$(this).parent().attr("class");var L=M+"-list";$("#pick-cat").hide("slow");$("#event-categories").show();$(".category-text").not(M).hide();$(".category-event-list").not(L).hide();$(".category-event-list").find("a").removeClass("selected");$("#events-top-navigation").hide();if(!($(M).children("h1").html())){$(M).children("h1").html($(this).parent().attr("class"))}$(M).fadeIn("slow");$(L).show("fast")});$("#cat-list h2 a").hover(function(){var L=$(this).parent().attr("class");$(this).animate({paddingLeft:"15px"},200);$("#events-navigation ."+L+" a").stop().animate({marginLeft:"0px"},200)},function(){var L=$(this).parent().attr("class");$("#events-navigation ."+L+" a").stop().animate({marginLeft:"56px"},200);$(this).animate({paddingLeft:"0px"},200)});$("#event-categories .category-event-list").find("a").click(function(){$(this).addClass("selected");$(".category-event-list").find("a").not(this).removeClass("selected");$("#events-top-navigation").show("fast");var L="#"+$(this).html().split(" ").join("").split(".").join("").toLowerCase();$(".category-text").not(L).hide();$(L).fadeIn("slow")});$("#events-top-navigation ul li a").click(function(){var P=$(this).html().toLowerCase();var N=$(".selected").html().split(" ").join("").split(".").join("").toLowerCase();var M="#"+N+"-"+P;if(P!="register"||N=="searock"){$(".category-text").not(M).hide();$(M).fadeIn("slow")}else{if(x("login_status")=="false"){$($("#event-register-box")).html("");$(".category-text").not($("#event-register-box")).hide();$($("#event-register-box")).html("<p>You'll have to login to register!</p>");$($("#event-register-box")).fadeIn("slow");F()}else{var O=$(".selected").text();var L="event_registration.php?event="+O;$.jGrowl("Registering Event: "+O);htmlobj=$.ajax({url:L,async:false});if(htmlobj.responseText=="already_registered"){$(".category-text").not($("#event-register-box")).hide();$("#event-register-box").html("<p>You have already registered for this event.</p><p><a id='unregister' href='javascript:void(0)'>Unregister</a></p>");$("#event-register-box").fadeIn("slow")}else{if(htmlobj.responseText=="registration_successful"){$(".category-text").not($("#event-register-box")).hide();$($("#event-register-box")).html("<p>Thank you for registering for </p><h2>"+O+". (<a id='unregister' href='javascript:void(0)'> Unregister </a>)</h2><h2>Your Events:</h1>"+u());$($("#event-register-box")).fadeIn("slow");$("#User-Info").html(s)}else{$(".category-text").not($("#event-register-box")).hide();$($("#event-register-box")).html("<p>There was a problem with your Registration.</p>");$($("#event-register-box")).fadeIn("slow")}}}}$("#unregister").click(function(){var R=$(".selected").text();var Q="unregister.php?event="+R;$.jGrowl("Unregistering event: "+R);htmlobj=$.ajax({url:Q,async:false});if(htmlobj.responseText=="successfully_unregistered"){$($("#event-register-box")).html("");$(".category-text").not($("#event-register-box")).hide();$($("#event-register-box")).html("<p>Successfully unregistered.</p>");$($("#event-register-box")).fadeIn("slow");$("#User-Info").html(s())}else{if(htmlobj.responseText=="not_logged_in"){F()}}})});$("#workshops-list").find("a").click(function(){$(this).addClass("selected");$("#workshops-list").find("a").not(this).removeClass("selected");$("#workshops-top-navigation").show("fast");var L="#"+$(this).html().split(" ").join("").split("&amp;").join("").split("'").join("").toLowerCase();$(".category-text").not(L).hide();$(L).fadeIn("slow")});$("#workshops-top-navigation ul li a").click(function(){var N=$(this).html().toLowerCase();var M=$(".selected").html().split(" ").join("").split(".").join("").split("&amp;").join("").split("'").join("").toLowerCase();var L="#"+M+"-"+N;$(".category-text").not(L).hide();$(L).fadeIn("slow")});$("#specials-list ul li a").click(function(){$(this).addClass("selected");$("#specials-list ul li a").not(this).removeClass("selected");var L="#"+$(this).html().split(" ").join("").split("&amp;").join("").split("'").join("").toLowerCase();$(".category-text").not(L).hide();$(L).fadeIn("slow")});$("#contact-link").click(function(){$("#footer-nav").animate({height:470,opacity:0.95},1500,"easeOutElastic");$(".bottom-content").not("#contact-us").fadeOut("fast");$("#footer-nav").css("z-index","250");$("#contact-us").fadeIn("fast");$("#close-panel").show("fast")});$("#contacts-accordion").find("a").click(function(){var L="#"+$(this).attr("class");$(".details").not(L).hide();if(!($(L).children("h3").html())){$(L).children("h3").html($(this).html())}$(L).fadeIn("slow")});var q,J;var I=new Array();$("#login-link").click(function(){F()});var j;$("#arrival_date, #departure_date").focus(function(){var L=$(this).offset().top-2*$("#datepicker").height();var M=$(this).offset().left;j="#"+$(this).attr("id");$("#datepicker").css({top:top,left:M});$("#datepicker").fadeIn("fast")});$("#arrival_date, #departure_date").blur(function(){$("#datepicker").fadeOut("fast")});var r="";var H="";var a=true;$("#datepicker a").click(function(){var L=$(this).html();if(j=="#arrival_date"){if(L=="17"){$("#accomodation-form .notification").html("Rejected selected date range.");return}if(!(isNaN(H))){if(parseInt(H)<parseInt(L)){$("#accomodation-form .notification").html("Rejected selected date range.");return}}$(j).siblings("label").html("");$("#accomodation-form .notification").html("");$(j).val("October "+L+", 2010");r=$("#arrival_date").val().split(" ")[1].split(",")[0]}else{if(L=="13"){$("#accomodation-form .notification").html("Rejected selected date range.");return}if(!(isNaN(r))){if(parseInt(r)>parseInt(L)){$("#accomodation-form .notification").html("Rejected selected date range.");return}}$(j).siblings("label").html("");$("#accomodation-form .notification").html("");$(j).val("October "+L+", 2010");H=$("#departure_date").val().split(" ")[1].split(",")[0]}});function y(L){if(isNaN(L)){a=false;$("#accomodation-form .notification").html("We require positive integral numbers.")}}function l(){if($("#departure_date").val()==""||$("#arrival_date").val()==""||$("#num_boys").val()==""||$("#num_girls").val()==""){$("#accomodation-form .notification").html("You've missed a few fields.");a=false}}var b=false;var z=true;$("#acco-button").click(function(){if(!z){return}a=true;l();y($("#num_boys").val());y($("#num_girls").val());if(!b){$("#accomodation-form .notification").html("You've not uploaded your travel proof.");return}if(a){$("#accomodation-form .notification").html("Give us a few seconds...");H=$("#departure_date").val().split(" ")[1].split(",")[0];r=$("#arrival_date").val().split(" ")[1].split(",")[0];var M=$("#num_boys").val();var L=$("#num_girls").val();var N="accomodation_registration.php?boys="+M+"&girls="+L+"&arrival="+r+"&depart="+H;htmlobj=$.ajax({url:N,async:false,success:function(){}});if(htmlobj.responseText=="registration_successful"){$("#accomodation-form .notification").html("You've been added to the accommodation waitlist.")}else{if(htmlobj.responseText=="not_registered"){$("#accomodation-form .notification").html("Travel proof is required.")}else{if(htmlobj.responseText=="already_registered"){$("#accomodation-form .notification").html("You've already registered for accommodation.")}else{$("#accomodation-form .notification").html("Network Error.")}}}}});$("#instructions-button").click(function(){$("#accomodation").hide();$(".acco-instructions").not("#main").hide();$("#accomodation-instructions, #main").fadeIn("fast")});$("#instructions-close-button").click(function(){$("#accomodation").fadeIn("fast");$("#accomodation-instructions").hide()});$("#acco-top-tabs a").click(function(){var L="#"+$(this).attr("id").split("-")[0];$(".acco-instructions").not(L).hide();$(L).fadeIn("fast")});$("#login-register label").inFieldLabels();$("#accomodation-form label").inFieldLabels();if(x("login_status")=="false"){v()}else{h()}$("#register-button").click(function(){var O=$("#register-email").val();var N=$("#register-password").val();var Q=$("#register-confirm-password").val();var P=$("#mobile").val().replace(/^0+/,"");var M=$("#name").val();var R=$("#college").val();var L="register.php?email="+O+"&password="+N+"&mobile="+P+"&college="+R+"&name="+M+"&confirm_password="+Q;$("#register-form .notification").html("We're verifying your details, give us a few seconds.");htmlobj=$.ajax({url:L,async:false,success:function(){}});if(htmlobj.responseText=="mailsent"){$("#register-form .notification").html("We've sent you an e-mail to confirm your registration. Check your inbox!");$("#register-form input:text, #register-form input:password").each(function(){$(this).val(null);$(this).focus()})}else{$("#register-form .notification").text(htmlobj.responseText)}$("#register-form #name").focus()});$("#login-button").click(function(){var N=$("#login-email").val();var M=$("#login-password").val();var L="login.php?email="+N+"&password="+M;$("#login-form .notification").html("Logging In...").fadeTo(0.93);htmlobj=$.ajax({url:L,async:false});if(htmlobj.responseText=="logged_in"){D=true;$("#login-form .notification").hide();$("#footer-nav").animate({height:567,opacity:0.95},1500,"easeOutElastic");h()}else{$("#login-form .notification").html(htmlobj.responseText)}});$("#logout").click(function(){var L="logout.php";D=false;htmlobj=$.ajax({url:L,async:false});$("#footer-nav").animate({height:415,opacity:0.95},1500,"easeOutElastic");v()});$("#close-panel").click(function(){$("#footer-nav").animate({height:40,opacity:1},1000,"easeOutBounce");$("#footer-nav").css("z-index","150");$(".bottom-content").fadeOut("fast");$("#close-panel").hide("fast")});function F(){if(D){E=567}else{E=415}$("#footer-nav").animate({height:E,opacity:0.95},1500,"easeOutElastic");$(".bottom-content").not("#login-register").fadeOut("fast");$("#footer-nav").css("z-index","250");$("#login-register").fadeIn("fast");if(D){$("#accomodation").fadeIn("fast")}$("#close-panel").show("fast")}function x(L){var M="userdata.php?action="+L;$("#User-Info").html("Loading user info...");htmlobj=$.ajax({url:M,async:false,success:function(){$("#User-Info").html("")}});return htmlobj.responseText}function s(){return("<br/><h1>Welcome, <b>"+x("name").split(" ")[0]+"</b></h1><p>This control panel will show you the events you have registered for, as well as your accommodation registration options. To register/unregister yourself for an event, browse over to the individual event page and click on the register/unregister link.</p><h1>Registered Events</h1>"+u())}function h(){D=true;$("#login-form").css("display","none");$("#register-form").css("display","none");$("#User-Info").html(s());$("#User-Info").css("display","block");$("#accomodation").fadeIn("fast");$("#logout").css("display","block");t()}function v(){D=false;$("#login-form").css("display","block");$("#logout").css("display","none");$("#User-Info").css("display","none");$("#User-Info").html("");$("#accomodation").css("display","none");$("#register-form").css("display","block")}function u(){var L="events_listing.php";htmlobj=$.ajax({url:L,async:false});return htmlobj.responseText}function t(){var L=new qq.FileUploader({element:document.getElementById("file-uploader"),allowedExtensions:["jpg","jpeg"],sizeLimit:1048576,onSubmit:function(N,M){$("#accomodation-form .notification").html("Uploading Travel Proof...");z=false},onComplete:function(O,M,N){$("#accomodation-form .notification").html("Upload successful.");b=true;z=true},showMessage:function(M){$("#accomodation-form .notification").html(M)},action:"upload.php"})}});